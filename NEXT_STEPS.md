# 🚀 次のステップ：アプリの起動と動作確認

## ✅ 完了した作業

- ✅ Supabaseプロジェクトの作成
- ✅ データベーステーブルの作成
- ✅ 認証ポリシーの設定
- ✅ 環境変数（`.env.local`）の設定

---

## 📦 ステップ6: Supabaseライブラリのインストール

### 6-1. インストールの確認

まず、Supabaseライブラリが既にインストールされているか確認します。

**PowerShellで以下のコマンドを実行：**

```powershell
npm list @supabase/supabase-js
```

**結果の見方：**
- `@supabase/supabase-js@2.39.0` のようにバージョン番号が表示されれば、**インストール済み**です
- `empty` やエラーが表示されたら、インストールが必要です

### 6-2. ライブラリをインストール（必要な場合のみ）

まだインストールされていない場合、以下のコマンドを実行：

```powershell
npm install @supabase/supabase-js
```

**実行方法：**
1. PowerShellを開く
2. プロジェクトのルートフォルダに移動（通常は既にそこにいます）：
   ```powershell
   cd C:\Users\tokam\Downloads\1
   ```
3. 以下のコマンドを実行：
   ```powershell
   npm install @supabase/supabase-js
   ```

**完了の確認：**
- `added 1 package` のようなメッセージが表示されれば完了
- エラーが出た場合は、メッセージを確認してください

---

## 🚀 ステップ7: アプリを起動

### 7-1. 開発サーバーを起動

PowerShellで以下のコマンドを実行：

```powershell
npm run dev
```

**実行方法：**
1. PowerShellでプロジェクトのルートフォルダにいることを確認
2. 以下のコマンドを実行：
   ```powershell
   npm run dev
   ```

**正常に起動した場合：**
- 以下のようなメッセージが表示されます：
  ```
  ▲ Next.js 14.0.0
  - Local:        http://localhost:3000
  ```
- 「Local: http://localhost:3000」が表示されれば成功です

**⚠️ エラーが出た場合：**
- `Supabase環境変数が設定されていません` というエラーが出たら
  - `.env.local` ファイルが正しい場所にあるか確認
  - 環境変数の値が正しいか確認
  - 開発サーバーを再起動（`Ctrl+C` で停止してから `npm run dev` で再起動）

### 7-2. ブラウザでアプリを開く

1. ブラウザを開く（Chrome、Edge、Firefoxなど）
2. アドレスバーに以下を入力してEnterキーを押す：
   ```
   http://localhost:3000
   ```
3. Todoアプリが表示されれば成功です

---

## 🧪 ステップ8: 動作確認

### 8-1. 名前を入力してログイン

1. アプリが開いたら、名前入力画面が表示されます
2. **自分の名前**を入力（例：`太郎`）
3. **「開始」ボタン**をクリック
4. Todo画面に切り替われば成功です

**💡 ポイント：**
- 初回ログイン時、新しいユーザーがSupabaseデータベースに作成されます
- 同じ名前で再ログインすると、同じTodoリストが表示されます

### 8-2. Todoを作成して確認

1. **タイトル**を入力（例：`テストTodo`）
2. **説明**を入力（任意、例：`これはテストです`）
3. **期日**を選択（任意）
4. **カテゴリ**を選択または新規作成（任意）
5. **「Todoを作成」ボタン**をクリック
6. 作成したTodoが右側のTodo一覧に表示されれば成功です

**💡 確認ポイント：**
- ✅ Todoが正しく表示される
- ✅ Todoのチェックボックスをクリックすると完了状態が切り替わる
- ✅ Todoを削除できる

### 8-3. 複数デバイスで確認（オプション）

**異なるデバイス（スマホ、PCなど）で同じデータが見られるか確認：**

1. **スマホでブラウザを開く**
   - 同じWi-Fiに接続されていることを確認
   - ブラウザで以下を入力：
     ```
     http://[PCのIPアドレス]:3000
     ```
   - または、Vercelにデプロイした場合は、デプロイ先のURLを使用

2. **同じ名前でログイン**
   - PCと同じ名前を入力
   - 同じTodoリストが表示されれば成功です

**💡 注意：**
- ローカル環境（`localhost:3000`）では、同じPC内のブラウザでのみアクセス可能です
- 別のデバイスからアクセスするには、Vercelなどにデプロイする必要があります

---

## 🔍 トラブルシューティング

### エラー1: "Supabase環境変数が設定されていません"

**原因：** `.env.local` ファイルが読み込まれていない

**解決方法：**
1. `.env.local` ファイルが `C:\Users\tokam\Downloads\1` にあるか確認
2. ファイル名が `.env.local` であることを確認（`.env.local.txt` ではない）
3. ファイルの内容が正しいか確認
4. **開発サーバーを再起動**（`Ctrl+C` で停止 → `npm run dev` で再起動）

### エラー2: "ユーザーが見つかりませんでした"

**原因：** データベーステーブルが作成されていない可能性

**解決方法：**
1. Supabaseダッシュボードの「Table Editor」でテーブルが存在するか確認
2. `users`、`todos`、`categories` の3つのテーブルがあるか確認
3. テーブルがない場合は、`SUPABASE_SETUP.md` の「ステップ3」を参照してテーブルを作成

### エラー3: Todoが作成されない

**原因：** データベース接続の問題、または認証ポリシーの問題

**解決方法：**
1. ブラウザの開発者ツール（F12キー）の「Console」タブでエラーを確認
2. Supabaseダッシュボードの「Logs」でエラーを確認
3. 認証ポリシーが正しく設定されているか確認（`SUPABASE_SETUP.md` の「ステップ4」を参照）

### エラー4: ページが表示されない（白画面など）

**原因：** アプリのビルドエラーまたはJavaScriptエラー

**解決方法：**
1. PowerShellのコンソールでエラーメッセージを確認
2. ブラウザの開発者ツール（F12キー）の「Console」タブでエラーを確認
3. 開発サーバーを再起動（`Ctrl+C` で停止 → `npm run dev` で再起動）

---

## ✅ 完了の確認

以下のすべてが確認できれば完了です：

1. ✅ アプリが `http://localhost:3000` で起動する
2. ✅ 名前を入力してログインできる
3. ✅ Todoを作成できる
4. ✅ Todoの完了/未完了を切り替えられる
5. ✅ Todoを削除できる
6. ✅ ページをリロードしても、作成したTodoが表示される

---

## 🎉 おめでとうございます！

Supabaseを使った本格的なログイン対応のTodoアプリが完成しました！

**次のステップ（オプション）：**
- Vercelにデプロイして、インターネット上で公開する（`DEPLOY_GUIDE.md` を参照）
- セキュリティを強化する（より厳密な認証ポリシーを設定）
- リアルタイム更新機能を追加する（Supabase Realtimeを使用）
