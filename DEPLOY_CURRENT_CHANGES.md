# 🚀 現在の変更をホームページ（Vercel）に反映する手順

## 📋 このガイドの目的

ローカルで行った修正（ログアウト機能の追加、デバッグログの追加など）を、インターネット上に公開されているTodoアプリに反映させます。

---

## ✅ ステップ1: 変更を確認する

まず、どのファイルが変更されているか確認します。

### 1-1. PowerShellでプロジェクトフォルダを開く

1. **エクスプローラーで `C:\Users\tokam\Downloads\1` を開く**
2. **フォルダ内で右クリック**
3. **「ターミナルで開く」または「PowerShellで開く」を選択**

**または、既にPowerShellが開いている場合：**
- 以下のコマンドでプロジェクトフォルダに移動します：
  ```powershell
  cd C:\Users\tokam\Downloads\1
  ```

### 1-2. 変更されたファイルを確認

PowerShellで以下のコマンドを実行：

```powershell
git status
```

**期待される結果：**
- 変更されたファイルの一覧が表示されます
- 例：
  ```
  modified: app/page.tsx
  modified: features/todo/components/TodoApp.tsx
  modified: lib/supabase/auth.ts
  modified: lib/supabase/todos.ts
  modified: lib/supabase/categories.ts
  ```

**何をしているのか：**
- `git status` = Gitで管理されているファイルの変更状況を確認するコマンド
- 変更されたファイルが表示されます

---

## ✅ ステップ2: 変更をステージングする

変更されたファイルを「コミットする準備ができました」とGitに伝えます。

### 2-1. すべての変更をステージング

PowerShellで以下のコマンドを実行：

```powershell
git add .
```

**何をしているのか：**
- `git add` = 変更されたファイルを「ステージング」するコマンド
- `.` = 現在のフォルダ内のすべてのファイルを意味します
- これにより、変更されたすべてのファイルがコミットの準備に入ります

**注意：**
- `.env.local`ファイルは自動的に除外されます（セキュリティのため）
- これは正常な動作です

---

## ✅ ステップ3: 変更をコミットする

変更を「コミット」という形で記録します。

### 3-1. コミットメッセージを付けてコミット

PowerShellで以下のコマンドを実行：

```powershell
git commit -m "Add logout functionality and debug logs for Supabase integration"
```

**日本語でのメッセージ例：**
```powershell
git commit -m "ログアウト機能とデバッグログを追加：Supabase対応の改善"
```

**何をしているのか：**
- `git commit` = 変更を「コミット」という形で記録するコマンド
- `-m` = コミットメッセージを指定するオプション
- メッセージは、変更内容を説明する短い文章です
- 日本語や英語、どちらでもOKです

**コミットメッセージの例：**
```powershell
git commit -m "Supabase対応：ログアウト機能とデバッグログを追加"
```

---

## ✅ ステップ4: GitHubにプッシュする

変更をGitHubにアップロードします。これにより、Vercelが自動的に変更を検知して、デプロイを開始します。

### 4-1. 変更をGitHubにプッシュ

PowerShellで以下のコマンドを実行：

```powershell
git push
```

**何をしているのか：**
- `git push` = ローカルの変更をGitHubに送信するコマンド
- GitHubに変更がアップロードされます
- Vercelが自動的に変更を検知して、デプロイを開始します

**プッシュが成功した場合：**
- 以下のようなメッセージが表示されます：
  ```
  Enumerating objects: ...
  Counting objects: ...
  Compressing objects: ...
  Writing objects: ...
  To https://github.com/your-username/todo-app.git
     xxxxx -> main
  ```
- エラーがなければ成功です ✅

**もしエラーが出た場合：**

**エラー1: 認証画面が表示される**
- 「Authorize Git Credential Manager」という画面が表示されたら
- 「Authorize git-ecosystem」をクリック
- これで認証が完了します

**エラー2: `git push`でエラーが出る**
- エラーメッセージを確認してください
- よくある原因：
  - 認証の問題 → Git Credential Managerで認証
  - ネットワークの問題 → インターネット接続を確認

---

## ✅ ステップ5: Vercelでデプロイ状況を確認する

GitHubにプッシュした後、Vercelが自動的にデプロイを開始します。

### 5-1. Vercelのダッシュボードを開く

1. **ブラウザで [Vercelのダッシュボード](https://vercel.com/dashboard) を開く**
2. **ログインしていない場合は、GitHubアカウントでログイン**
3. **自分のプロジェクト（例：`todo-app`）をクリック**

### 5-2. デプロイ状況を確認

1. **「Deployments」タブをクリック**
2. **新しいデプロイが進行中または完了していることを確認**

**デプロイが完了するまでの時間：**
- 通常、2〜5分程度かかります
- 「Ready」または「Build Completed」と緑色のチェックマーク（✅）が表示されれば完了です

**進行状況の確認：**
- 「Building...」と表示されている → デプロイ進行中
- 「Ready」と表示されている → デプロイ完了 ✅
- 赤色のマーク（❌）と表示されている → デプロイ失敗（エラーログを確認）

---

## ✅ ステップ6: 公開サイトで動作確認する

デプロイが完了したら、実際のサイトで変更が反映されているか確認します。

### 6-1. 公開サイトを開く

1. **Vercelのダッシュボードで「Visit」ボタンをクリック**
   - または、以前設定したURL（例：`https://your-project.vercel.app`）を直接開く

2. **シークレットウィンドウ（プライベートブラウジング）で開く**
   - Chrome/Edge: `Ctrl + Shift + N`
   - Firefox: `Ctrl + Shift + P`
   - これにより、`localStorage`が空の状態で確認できます

### 6-2. 動作確認

**確認ポイント：**

1. **名前入力画面が表示されるか確認**
   - ✅ 表示される → 正常です

2. **名前を入力して「開始」ボタンをクリック**
   - ✅ Todo画面に切り替わる → 正常です

3. **Todo画面の右上に「ログアウト」ボタンがあるか確認**
   - ✅ 表示される → 正常です（修正が反映されています）

4. **「ログアウト」ボタンをクリック**
   - ✅ 名前入力画面に戻る → 正常です

5. **開発者ツール（F12）の「Console」タブでデバッグログを確認**
   - ✅ デバッグログが表示される → 正常です（ローカル環境のみ）

---

## 🔍 トラブルシューティング

### 問題1: `git`コマンドが見つからない

**症状：**
```
git : 用語 'git' は、コマンドレット、関数、スクリプト ファイルまたは操作可能なプログラムの名前として認識されていません
```

**解決方法：**
1. Gitがインストールされているか確認
   - 以前インストールしたはずです
   - インストール方法は`SETUP_GUIDE.md`を参照

2. PowerShellを再起動してみる
   - PowerShellを閉じて、もう一度開く

3. パスを確認
   - Gitがインストールされていれば、通常は動作するはずです

---

### 問題2: デプロイが失敗した

**確認方法：**
1. **Vercelのダッシュボード → 「Deployments」タブ**
2. **失敗したデプロイ（赤色のマーク）をクリック**
3. **エラーログを確認**

**よくある原因：**
- **ビルドエラー** → TypeScriptの型エラーなど
- **環境変数が設定されていない** → `DEPLOY_SUPABASE.md`のステップ2を参照

**解決方法：**
- エラーログの内容に従って修正してください
- よくあるエラーは`FIX_404_ERROR.md`を参照

---

### 問題3: 変更が反映されない

**確認方法：**
1. **ブラウザのキャッシュをクリア**
   - `Ctrl + Shift + R`（強制リロード）
   - または、シークレットウィンドウで確認

2. **デプロイが完了しているか確認**
   - Vercelのダッシュボードで「Ready」になっているか確認

3. **正しいURLを開いているか確認**
   - Vercelのダッシュボードの「Visit」ボタンから開く

---

## 📝 コマンド一覧（まとめ）

PowerShellで順番に実行してください：

```powershell
# ステップ1: 変更を確認
git status

# ステップ2: 変更をステージング
git add .

# ステップ3: 変更をコミット
git commit -m "ログアウト機能とデバッグログを追加：Supabase対応の改善"

# ステップ4: GitHubにプッシュ
git push
```

**プッシュ後：**
- Vercelが自動的にデプロイを開始します
- 2〜5分待って、Vercelのダッシュボードでデプロイ完了を確認
- 完了後、公開サイトで変更が反映されているか確認

---

## ✅ 完了の確認

以下のすべてが確認できれば完了です：

- ✅ 変更がGitHubにプッシュされた（`git push`が成功）
- ✅ Vercelでデプロイが完了した（「Ready」と表示）
- ✅ 公開サイトで名前入力画面が表示される（シークレットウィンドウで確認）
- ✅ ログアウトボタンが表示される
- ✅ ログアウトボタンをクリックすると名前入力画面に戻る

---

## 🎉 完了！

これで、ローカルの変更がインターネット上に公開されました！

変更が反映されない場合は、上記のトラブルシューティングを参照してください。
